{% extends 'base.html' %}
{% block title %}Author Dashboard{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1><i class="bi bi-pencil-square"></i> Author Dashboard</h1>
    <a href="{% url 'author:create_story' %}" class="btn btn-success">
        <i class="bi bi-plus-lg"></i> New Story
    </a>
</div>

<div class="card mb-4">
    <div class="card-header bg-warning text-dark">
        <h5 class="mb-0"><i class="bi bi-file-earmark"></i> Drafts ({{ drafts|length }})</h5>
    </div>
    <div class="card-body">
        {% for story in drafts %}
        <div class="d-flex justify-content-between align-items-center border-bottom py-2">
            <div>
                <strong>{{ story.title }}</strong>
                <small class="text-muted d-block">{{ story.description|truncatewords:10 }}</small>
            </div>
            <div>
                <a href="{% url 'author:edit_story' story.id %}" class="btn btn-sm btn-outline-primary">Edit</a>
                <a href="{% url 'author:preview_story' story.id %}" class="btn btn-sm btn-outline-secondary">Preview</a>
                <a href="{% url 'author:publish_story' story.id %}" class="btn btn-sm btn-success">Publish</a>
            </div>
        </div>
        {% empty %}
        <p class="text-muted mb-0">No drafts. <a href="{% url 'author:create_story' %}">Create your first story!</a></p>
        {% endfor %}
    </div>
</div>

<div class="card mb-4">
    <div class="card-header bg-success text-white">
        <h5 class="mb-0"><i class="bi bi-check-circle"></i> Published ({{ published|length }})</h5>
    </div>
    <div class="card-body">
        {% for story in published %}
        <div class="d-flex justify-content-between align-items-center border-bottom py-2">
            <div>
                <strong>{{ story.title }}</strong>
            </div>
            <div>
                <a href="{% url 'stories:detail' story.id %}" class="btn btn-sm btn-outline-primary">View</a>
                <a href="{% url 'author:edit_story' story.id %}" class="btn btn-sm btn-outline-secondary">Edit</a>
            </div>
        </div>
        {% empty %}
        <p class="text-muted mb-0">No published stories yet.</p>
        {% endfor %}
    </div>
</div>

{% if suspended %}
<div class="card">
    <div class="card-header bg-danger text-white">
        <h5 class="mb-0"><i class="bi bi-x-circle"></i> Suspended ({{ suspended|length }})</h5>
    </div>
    <div class="card-body">
        {% for story in suspended %}
        <div class="d-flex justify-content-between align-items-center border-bottom py-2">
            <div>
                <strong>{{ story.title }}</strong>
                <span class="badge bg-danger">Suspended by Admin</span>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}
{% endblock %}
